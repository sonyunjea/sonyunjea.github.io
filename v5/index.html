<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상호 성장 및 신뢰 약정서 생성기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chosen Palette: Calm Harmony (Stone, Gray, Soft Blue) -->
    <!-- Application Structure Plan: A single-page, task-oriented application that transforms the static lease agreement into an interactive form for a personal growth pact. The structure uses distinct, collapsible sections for Parties, Term, Obligations, and Penalties. This guided approach simplifies formalizing the personal agreement. Key interactions include pre-filled core promises, editable clauses, and a one-click preview modal that generates a formal-looking, print-ready version of the pact. This structure was chosen to give a serious, structured feel to a deeply personal and unique agreement. -->
    <!-- Visualization & Content Choices: The application visualizes the contract structure through an interactive form. Report Info: Core promises and obligations. Goal: Inform, Organize, Formalize. Viz/Presentation Method: Labeled text areas with pre-filled, editable content. Interaction: Users can modify or accept the core terms. Justification: Provides a solid foundation while allowing personalization. Library/Method: Vanilla JS. Report Info: Penalties for breach. Goal: Emphasize seriousness. Viz/Presentation Method: A pre-written, editable list of non-financial, personal consequences. Interaction: Users can review and agree upon the stakes. Justification: Aligns with the non-legal, trust-based nature of the agreement. Library/Method: Vanilla JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap');
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
        }
        .form-section {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            margin-bottom: 1.5rem;
            transition: all 0.3s ease-in-out;
        }
        .form-section h2 {
            cursor: pointer;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            font-weight: 500;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .form-section h2 .icon {
            transition: transform 0.3s ease-in-out;
        }
        .form-section .content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding: 0 1.5rem;
        }
        .form-section.open .content {
            max-height: 1000px;
            padding: 1.5rem;
        }
        .form-section.open h2 .icon {
            transform: rotate(180deg);
        }
        .input-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }
        .input-field {
            display: flex;
            flex-direction: column;
        }
        .input-field label {
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            color: #4b5563;
        }
        .input-field input, .input-field select, .input-field textarea {
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            padding: 0.5rem 0.75rem;
            width: 100%;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .input-field input:focus, .input-field select:focus, .input-field textarea:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 2px #bfdbfe;
        }
        .action-buttons {
            position: sticky;
            bottom: 0;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 1rem;
            border-top: 1px solid #e5e7eb;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: flex;
            justify-content: center;
            gap: 1rem;
            backdrop-filter: blur(5px);
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .btn-primary {
            background-color: #2563eb;
            color: white;
        }
        .btn-primary:hover {
            background-color: #1d4ed8;
        }
        .btn-secondary {
            background-color: #e5e7eb;
            color: #374151;
        }
        .btn-secondary:hover {
            background-color: #d1d5db;
        }
        #previewModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }
        #previewModal.visible {
            opacity: 1;
            visibility: visible;
        }
        #previewContent {
            background-color: white;
            width: 90%;
            max-width: 800px;
            height: 90%;
            max-height: 90vh;
            overflow-y: auto;
            border-radius: 0.5rem;
            padding: 2.5rem;
            font-size: 15px;
            line-height: 1.8;
        }
        #previewContent h1 {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 2rem;
        }
        #previewContent h3 {
             font-size: 1.1em;
             font-weight: bold;
             margin-top: 1.5rem;
             margin-bottom: 0.5rem;
        }
        #previewContent p {
            margin-bottom: 0.75rem;
        }
        #previewContent ol {
            list-style-type: decimal;
            list-style-position: inside;
            padding-left: 1rem;
        }
         @media print {
            body * { visibility: hidden; }
            #previewModal, #previewContent, #previewContent * { visibility: visible; }
            #previewModal { position: absolute; left: 0; top: 0; width: 100%; height: auto; background-color: white; padding: 0; }
            #previewContent { width: 100%; height: auto; max-height: none; box-shadow: none; border: none; margin: 0; padding: 1cm; font-size: 12pt; }
            .modal-actions { display: none; }
        }
    </style>
</head>
<body>
    <div class="container mx-auto p-4 md:p-8 max-w-4xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-800">상호 성장 및 신뢰 약정서</h1>
            <p class="text-gray-500 mt-2">두 분의 약속을 정식 문서로 기록하고 완성하세요.</p>
        </header>

        <form id="agreement-form">
            <div class="form-section open" id="section-parties">
                <h2><span>제1조 (계약 당사자)</span> <span class="icon">▼</span></h2>
                <div class="content">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="party_gap">"갑"</label>
                            <input type="text" id="party_gap" name="party_gap" value="허지현">
                        </div>
                        <div class="input-field">
                            <label for="party_eul">"을"</label>
                            <input type="text" id="party_eul" name="party_eul" value="손윤재">
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-section" id="section-period">
                <h2><span>제2조 (계약 기간 및 갱신)</span> <span class="icon">▶</span></h2>
                <div class="content">
                    <div class="input-group">
                        <div class="input-field">
                            <label for="start_date">계약 시작일</label>
                            <input type="date" id="start_date" name="start_date">
                        </div>
                        <div class="input-field">
                            <label for="end_date">계약 종료일</label>
                            <input type="date" id="end_date" name="end_date">
                        </div>
                        <div class="input-field md:col-span-2">
                            <label>총 기간</label>
                            <p id="total_period" class="mt-2 text-gray-700 font-medium h-8 flex items-center">-</p>
                        </div>
                    </div>
                    <div class="input-field mt-4">
                        <label for="renewal_clause">갱신 조건</label>
                        <textarea id="renewal_clause" name="renewal_clause" rows="3">본 계약은 2년마다 갱신되는 것을 원칙으로 하며, 계약 만료 최소 2개월 전까지 당사자 일방이 상대방에게 계약의 종료 또는 갱신 의사를 서면 또는 구두로 통지하여야 한다. 별도의 통지가 없을 경우, 동일한 조건으로 2년간 자동 갱신된 것으로 본다.</textarea>
                    </div>
                </div>
            </div>

            <div class="form-section" id="section-obligations">
                <h2><span>제3조 (상호 의무)</span> <span class="icon">▶</span></h2>
                <div class="content">
                    <div class="input-field">
                        <label for="obligation_gap">"갑"의 의무</label>
                        <textarea id="obligation_gap" name="obligation_gap" rows="4">"갑"(허지현)은 "을"(손윤재)에게 자신의 성장 과정을 진솔하게 공유할 의무를 지닌다. 이는 과거의 경험, 현재의 고민, 미래의 목표 등을 포함하며, "을"의 조언을 구하기 위한 충분한 정보를 제공하는 것을 목적으로 한다.</textarea>
                    </div>
                    <div class="input-field mt-4">
                        <label for="obligation_eul">"을"의 의무</label>
                        <textarea id="obligation_eul" name="obligation_eul" rows="4">"을"(손윤재)은 "갑"(허지현)의 공유 내용에 대하여, 자신의 지식과 경험을 바탕으로 한 최선의 조언(피드백)과 본인의 역량을 제공할 것을 약속한다. 이는 "갑"의 성장을 돕고 지지하는 것을 목적으로 한다.</textarea>
                    </div>
                </div>
            </div>

            <div class="form-section" id="section-penalties">
                <h2><span>제4조 (계약 위반 시 불이익)</span> <span class="icon">▶</span></h2>
                <div class="content">
                     <div class="input-field">
                        <label for="penalty_clauses">불이익 조항</label>
                        <textarea id="penalty_clauses" name="penalty_clauses" rows="8">본 계약의 목적을 위반하거나 상호 의무를 성실히 이행하지 아니하여 계약이 파기될 경우, 위반 당사자("귀책 당사자")는 다음과 같은 불이익을 감수한다.
1. 귀책 당사자는 상대방에게 진심을 담은 1,000자 이상의 자필 사과 편지를 작성하여 전달하고, 상대방이 수락할 때까지 월 1회, 총 3회에 걸쳐 관계 개선을 위한 대화를 요청해야 한다.
2. 귀책 당사자는 상대방이 지정한 주제의 책을 1권 읽고, 그에 대한 깊이 있는 감상문과 '이 계약의 가치'에 대한 성찰을 담은 보고서를 A4 3장 분량으로 작성하여 제출해야 한다.
3. 본 계약의 파기 시, 귀책 당사자는 향후 2년간 상대방에게 어떠한 형태로든 본 계약과 유사한 성격의 조언이나 성장에 관한 도움을 요청할 수 없으며, 상대방 또한 이에 응할 의무가 없다.</textarea>
                    </div>
                </div>
            </div>

            <div class="form-section" id="section-special">
                <h2><span>제5조 (기타 사항)</span> <span class="icon">▶</span></h2>
                <div class="content">
                    <div class="input-field">
                        <label for="special_clauses">특약사항 (필요 시 입력)</label>
                        <textarea id="special_clauses" name="special_clauses" rows="4" placeholder="예: 모든 대화 내용은 상호 동의 없이 제3자에게 누설하지 않는다."></textarea>
                    </div>
                </div>
            </div>
        </form>
    </div>
    
    <div class="action-buttons">
        <button type="button" id="resetBtn" class="btn btn-secondary">초기화</button>
        <button type="button" id="previewBtn" class="btn btn-primary">미리보기 및 인쇄</button>
    </div>

    <div id="previewModal">
        <div id="previewContent">
            <h1>상호 성장 및 신뢰에 관한 약정서</h1>
            <div id="preview-body"></div>
            <div class="modal-actions mt-6 text-center">
                 <button type="button" id="printBtn" class="btn btn-primary">인쇄</button>
                 <button type="button" id="closeModalBtn" class="btn btn-secondary">닫기</button>
            </div>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('agreement-form');

    const sections = document.querySelectorAll('.form-section');
    sections.forEach(section => {
        const header = section.querySelector('h2');
        header.addEventListener('click', () => {
            const isOpen = section.classList.contains('open');
            sections.forEach(s => s.classList.remove('open'));
            if (!isOpen) {
                section.classList.add('open');
            }
            updateSectionIcons();
        });
    });

    function updateSectionIcons() {
        sections.forEach(section => {
            const icon = section.querySelector('h2 .icon');
            if (section.classList.contains('open')) {
                icon.textContent = '▼';
            } else {
                icon.textContent = '▶';
            }
        });
    }

    const startDateInput = document.getElementById('start_date');
    const endDateInput = document.getElementById('end_date');
    startDateInput.addEventListener('change', updatePeriod);
    endDateInput.addEventListener('change', updatePeriod);
    
    function updatePeriod() {
        if (startDateInput.value && endDateInput.value) {
            const start = new Date(startDateInput.value);
            const end = new Date(endDateInput.value);
            if (start < end) {
                let years = end.getFullYear() - start.getFullYear();
                let months = end.getMonth() - start.getMonth();
                let days = end.getDate() - start.getDate();

                if (days < 0) {
                    months--;
                    const prevMonth = new Date(end.getFullYear(), end.getMonth(), 0);
                    days += prevMonth.getDate();
                }
                if (months < 0) {
                    years--;
                    months += 12;
                }
                
                let result = '총 ';
                if (years > 0) result += `${years}년 `;
                if (months > 0) result += `${months}개월 `;
                if (days > 0) result += `${days}일`;

                document.getElementById('total_period').textContent = result.trim();
            } else {
                document.getElementById('total_period').textContent = '종료일은 시작일보다 이후여야 합니다.';
            }
        }
    }
    
    document.getElementById('resetBtn').addEventListener('click', () => {
        if(confirm('정말로 모든 내용을 초기화하시겠습니까?')) {
            form.reset();
            document.getElementById('total_period').textContent = '-';
        }
    });

    const previewModal = document.getElementById('previewModal');
    document.getElementById('previewBtn').addEventListener('click', () => {
        generatePreview();
        previewModal.classList.add('visible');
    });
    document.getElementById('closeModalBtn').addEventListener('click', () => {
        previewModal.classList.remove('visible');
    });
    document.getElementById('printBtn').addEventListener('click', () => {
        window.print();
    });

    function getFormData() {
        const formData = new FormData(form);
        const data = {};
        for (let [key, value] of formData.entries()) {
            data[key] = value;
        }
        return data;
    }

    function formatDate(dateString) {
        if (!dateString) return '____년 __월 __일';
        const date = new Date(dateString);
        return `${date.getFullYear()}년 ${date.getMonth() + 1}월 ${date.getDate()}일`;
    }

    function nl2p(str) {
        return str.replace(/\n/g, '<br>');
    }

    function generatePreview() {
        const data = getFormData();
        const previewBody = document.getElementById('preview-body');
        
        previewBody.innerHTML = `
            <p><strong>${data.party_gap || '허지현'}</strong>(이하 "갑"이라 칭한다)과 <strong>${data.party_eul || '손윤재'}</strong>(이하 "을"이라 칭한다)은 상호간의 성장과 신뢰를 바탕으로 다음과 같이 약정을 체결한다.</p>
            
            <h3>제1조 (목적)</h3>
            <p>본 약정은 "갑"과 "을"이 상호 존중과 신의성실의 원칙에 입각하여, 각자의 성장과 발전을 도모하고 지지하는 것을 목적으로 한다.</p>
            
            <h3>제2조 (계약 기간 및 갱신)</h3>
            <p>① 본 약정의 기간은 <strong>${formatDate(data.start_date)}</strong>부터 <strong>${formatDate(data.end_date)}</strong>까지(${document.getElementById('total_period').textContent})로 한다.</p>
            <p>② ${nl2p(data.renewal_clause || '')}</p>

            <h3>제3조 (상호 의무)</h3>
            <p>① "갑"의 의무: ${nl2p(data.obligation_gap || '')}</p>
            <p>② "을"의 의무: ${nl2p(data.obligation_eul || '')}</p>

            <h3>제4조 (계약 위반 시 불이익)</h3>
            <p>${nl2p(data.penalty_clauses || '')}</p>

            <h3>제5조 (기타 사항)</h3>
            <p>${nl2p(data.special_clauses || '본 계약서에서 정하지 않은 사항은 일반적인 상관례와 상호 협의에 따른다.')}</p>

            <br><br>
            <p class="text-center">본 약정의 내용을 증명하기 위하여 약정서 2부를 작성하여 "갑"과 "을"이 각각 서명 또는 날인한 후 1부씩 보관한다.</p>
            <br>
            <p class="text-center font-bold">${formatDate(new Date())}</p>
            <br><br><br>
            
            <div class="flex justify-around text-center">
                <div>
                    <p>(갑)</p>
                    <p class="mt-8">성 명 : <strong>${data.party_gap || '허지현'}</strong> (인)</p>
                </div>
                <div>
                    <p>(을)</p>
                    <p class="mt-8">성 명 : <strong>${data.party_eul || '손윤재'}</strong> (인)</p>
                </div>
            </div>
        `;
    }
    
    updateSectionIcons();
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('start_date').value = today;
    const twoYearsLater = new Date();
    twoYearsLater.setFullYear(twoYearsLater.getFullYear() + 2);
    document.getElementById('end_date').value = twoYearsLater.toISOString().split('T')[0];
    updatePeriod();
});
</script>
</body>
</html>
