<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°©ì¹˜í˜• ëˆë‚˜ë¬´ í‚¤ìš°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Jua', sans-serif;
            touch-action: manipulation; /* ëª¨ë°”ì¼ì—ì„œ ë”ë¸” íƒ­ í™•ëŒ€ ë°©ì§€ */
        }
        #money-tree {
            font-size: 8rem; /* ğŸŒ³ ì´ëª¨ì§€ í¬ê¸° */
            cursor: pointer;
            user-select: none; /* í…ìŠ¤íŠ¸ ì„ íƒ ë°©ì§€ */
            transition: transform 0.1s ease;
        }
        #money-tree:active {
            transform: scale(0.95);
        }
        .floating-text {
            position: absolute;
            font-size: 1.5rem;
            font-weight: bold;
            color: #facc15; /* ë…¸ë€ìƒ‰ */
            animation: float-up 1s ease-out forwards;
            pointer-events: none; /* í´ë¦­ ì´ë²¤íŠ¸ ë°©í•´í•˜ì§€ ì•Šë„ë¡ */
        }
        @keyframes float-up {
            from {
                transform: translateY(0);
                opacity: 1;
            }
            to {
                transform: translateY(-80px);
                opacity: 0;
            }
        }
        .disabled-button {
            background-color: #4a5568 !important; /* ì–´ë‘ìš´ íšŒìƒ‰ */
            cursor: not-allowed !important;
        }
    </style>
</head>
<body class="bg-gray-800 text-white flex flex-col items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md mx-auto text-center bg-gray-900 p-6 rounded-2xl shadow-2xl border border-gray-700">
        
        <!-- ë¨¸ë‹ˆ ë””ìŠ¤í”Œë ˆì´ -->
        <div class="mb-6">
            <h1 class="text-3xl font-bold text-yellow-400">ğŸ’° í˜„ì¬ ìì‚° ğŸ’°</h1>
            <p id="money-display" class="text-5xl my-2 break-all">0</p>
            <p class="text-xl text-gray-400">(ì´ˆë‹¹ <span id="mps-display">0</span>ì›)</p>
        </div>

        <!-- ëˆë‚˜ë¬´ -->
        <div id="tree-container" class="relative mb-8">
            <div id="money-tree">ğŸŒ³</div>
        </div>

        <!-- ì—…ê·¸ë ˆì´ë“œ ì„¹ì…˜ -->
        <div class="space-y-4">
            <h2 class="text-2xl font-bold">âœ¨ ì—…ê·¸ë ˆì´ë“œ âœ¨</h2>
            <!-- í´ë¦­ íŒŒì›Œ ì—…ê·¸ë ˆì´ë“œ -->
            <button id="click-upgrade" class="w-full bg-blue-600 hover:bg-blue-700 p-4 rounded-lg shadow-lg transition-all duration-200">
                <p class="font-bold text-lg">í´ë¦­ íŒŒì›Œ ê°•í™” (Lv.<span id="click-level-display">1</span>)</p>
                <p>í´ë¦­ë‹¹ <span id="click-power-display">1</span>ì›</p>
                <p>ë¹„ìš©: <span id="click-cost-display">10</span>ì›</p>
            </button>
            <!-- ìë™ ìƒì‚° ì—…ê·¸ë ˆì´ë“œ -->
            <button id="auto-upgrade" class="w-full bg-green-600 hover:bg-green-700 p-4 rounded-lg shadow-lg transition-all duration-200">
                <p class="font-bold text-lg">ìë™ ìƒì‚° ê³µì¥ (Lv.<span id="auto-level-display">0</span>)</p>
                <p>ì´ˆë‹¹ <span id="auto-power-display">0.1</span>ì› ì¶”ê°€</p>
                <p>ë¹„ìš©: <span id="auto-cost-display">25</span>ì›</p>
            </button>
        </div>
        
        <!-- ê²Œì„ ì €ì¥/ì´ˆê¸°í™” -->
        <div class="mt-8">
            <button id="reset-button" class="text-gray-500 hover:text-red-500 transition-colors">ê²Œì„ ì´ˆê¸°í™”</button>
        </div>
    </div>

    <script>
        // DOM ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
        const moneyDisplay = document.getElementById('money-display');
        const mpsDisplay = document.getElementById('mps-display');
        const moneyTree = document.getElementById('money-tree');
        const treeContainer = document.getElementById('tree-container');

        const clickUpgradeBtn = document.getElementById('click-upgrade');
        const clickLevelDisplay = document.getElementById('click-level-display');
        const clickPowerDisplay = document.getElementById('click-power-display');
        const clickCostDisplay = document.getElementById('click-cost-display');

        const autoUpgradeBtn = document.getElementById('auto-upgrade');
        const autoLevelDisplay = document.getElementById('auto-level-display');
        const autoPowerDisplay = document.getElementById('auto-power-display');
        const autoCostDisplay = document.getElementById('auto-cost-display');
        
        const resetButton = document.getElementById('reset-button');

        // ê²Œì„ ìƒíƒœ ë³€ìˆ˜
        let gameState = {
            money: 0,
            moneyPerSecond: 0,
            moneyPerClick: 1,
            clickUpgradeLevel: 1,
            clickUpgradeCost: 10,
            autoUpgradeLevel: 0,
            autoUpgradeCost: 25,
            autoPower: 0.1, // í•œë²ˆ ì—…ê·¸ë ˆì´ë“œ ì‹œ ì˜¤ë¥´ëŠ” ì´ˆë‹¹ ìƒì‚°ëŸ‰
        };

        // ê²Œì„ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
        function loadGame() {
            const savedState = localStorage.getItem('moneyTreeSave');
            if (savedState) {
                gameState = JSON.parse(savedState);
            }
        }

        // ê²Œì„ ë°ì´í„° ì €ì¥í•˜ê¸°
        function saveGame() {
            localStorage.setItem('moneyTreeSave', JSON.stringify(gameState));
        }

        // ìˆ«ì í¬ë§·íŒ… (ì˜ˆ: 1000 -> 1,000)
        function formatNumber(num) {
            return Math.floor(num).toLocaleString();
        }

        function formatDecimal(num) {
             if (num < 10) {
                return num.toFixed(1);
            }
            return formatNumber(num);
        }

        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            moneyDisplay.textContent = formatNumber(gameState.money);
            mpsDisplay.textContent = formatDecimal(gameState.moneyPerSecond);

            clickLevelDisplay.textContent = gameState.clickUpgradeLevel;
            clickPowerDisplay.textContent = formatNumber(gameState.moneyPerClick);
            clickCostDisplay.textContent = formatNumber(gameState.clickUpgradeCost);

            autoLevelDisplay.textContent = gameState.autoUpgradeLevel;
            autoPowerDisplay.textContent = formatDecimal(gameState.autoPower);
            autoCostDisplay.textContent = formatNumber(gameState.autoUpgradeCost);
            
            // ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™”
            updateButtonState(clickUpgradeBtn, gameState.money >= gameState.clickUpgradeCost);
            updateButtonState(autoUpgradeBtn, gameState.money >= gameState.autoUpgradeCost);
        }

        function updateButtonState(button, isEnabled) {
            if (isEnabled) {
                button.classList.remove('disabled-button');
                button.disabled = false;
            } else {
                button.classList.add('disabled-button');
                button.disabled = true;
            }
        }

        // í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        moneyTree.addEventListener('click', (e) => {
            gameState.money += gameState.moneyPerClick;
            showFloatingText(e);
            updateUI();
        });

        // í´ë¦­ ì‹œ ëœ¨ëŠ” í…ìŠ¤íŠ¸
        function showFloatingText(e) {
            const floatingText = document.createElement('div');
            floatingText.textContent = `+${formatNumber(gameState.moneyPerClick)}`;
            floatingText.className = 'floating-text';
            
            // í´ë¦­ ìœ„ì¹˜ì— í…ìŠ¤íŠ¸ í‘œì‹œ
            const rect = treeContainer.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            floatingText.style.left = `${x}px`;
            floatingText.style.top = `${y}px`;

            treeContainer.appendChild(floatingText);

            // ì• ë‹ˆë©”ì´ì…˜ ì¢…ë£Œ í›„ ìš”ì†Œ ì œê±°
            setTimeout(() => {
                floatingText.remove();
            }, 1000);
        }

        // í´ë¦­ íŒŒì›Œ ì—…ê·¸ë ˆì´ë“œ
        clickUpgradeBtn.addEventListener('click', () => {
            if (gameState.money >= gameState.clickUpgradeCost) {
                gameState.money -= gameState.clickUpgradeCost;
                gameState.clickUpgradeLevel++;
                gameState.moneyPerClick = Math.ceil(gameState.moneyPerClick * 1.2);
                gameState.clickUpgradeCost = Math.ceil(gameState.clickUpgradeCost * 1.25);
                updateUI();
            }
        });

        // ìë™ ìƒì‚° ì—…ê·¸ë ˆì´ë“œ
        autoUpgradeBtn.addEventListener('click', () => {
            if (gameState.money >= gameState.autoUpgradeCost) {
                gameState.money -= gameState.autoUpgradeCost;
                gameState.autoUpgradeLevel++;
                gameState.moneyPerSecond += gameState.autoPower;
                gameState.autoUpgradeCost = Math.ceil(gameState.autoUpgradeCost * 1.2);
                gameState.autoPower = parseFloat((gameState.autoPower * 1.05).toFixed(2));
                updateUI();
            }
        });
        
        // ê²Œì„ ì´ˆê¸°í™”
        resetButton.addEventListener('click', () => {
            if (confirm('ì •ë§ë¡œ ê²Œì„ì„ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ? ëª¨ë“  ì§„í–‰ ìƒí™©ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.')) {
                localStorage.removeItem('moneyTreeSave');
                // í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì—¬ ì´ˆê¸° ìƒíƒœë¡œ ë˜ëŒë¦½ë‹ˆë‹¤.
                window.location.reload();
            }
        });
        

        // ë©”ì¸ ê²Œì„ ë£¨í”„ (1ì´ˆë§ˆë‹¤ ì‹¤í–‰)
        setInterval(() => {
            gameState.money += gameState.moneyPerSecond;
            updateUI();
        }, 1000);
        
        // 10ì´ˆë§ˆë‹¤ ìë™ ì €ì¥
        setInterval(saveGame, 10000);

        // ì´ˆê¸°í™”
        loadGame();
        updateUI();
    </script>
</body>
</html>
