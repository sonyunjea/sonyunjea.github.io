<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ν‚¬λ¬ λ¬Έν•­ μ •λ³µ - μ‚¬νΒ·λ¬Έν™” κ³µλµμ§‘</title>
    <!-- Tailwind CSS CDN μ¤ν¬λ¦½νΈ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js CDN μ¤ν¬λ¦½νΈ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Google Fonts (Inter) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <!-- μ‚¬μ©μ μ •μ μ¤νƒ€μΌ -->
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Inter', 'sans-serif'; }
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

<!-- Header Section -->
<header class="bg-white/90 backdrop-blur-lg sticky top-0 z-50 shadow-md border-b border-gray-200">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
            <a href="./index.html" class="flex items-center space-x-2">
                <span class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-emerald-500">
                    β¨ μ‚¬νΒ·λ¬Έν™” κ³µλµμ§‘
                </span>
            </a>
            <div class="hidden md:flex items-center space-x-8 text-base font-medium">
                <a href="./concepts.html" class="text-gray-600 hover:text-blue-600 transition duration-300">μ‹¬ν™” κ°λ…</a>
                <a href="./killer-questions.html" class="text-emerald-600 font-semibold border-b-2 border-emerald-600 pb-1">ν‚¬λ¬ λ¬Έν•­</a>
                <a href="./theories.html" class="text-gray-600 hover:text-blue-600 transition duration-300">μ΄λ΅  μ μ©</a>
            </div>
        </div>
    </nav>
</header>

<!-- Main Content -->
<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">

    <section id="killer-questions" class="fade-in-up" style="opacity:0;">
        <!-- Page Title -->
        <div class="text-center mb-12">
            <h2 class="text-4xl font-extrabold text-gray-900 tracking-tight">ν‚¬λ¬ λ¬Έν•­ μ •λ³µ</h2>
            <p class="mt-4 text-lg text-gray-600">μµκ³ λ‚λ„ λ„ν‘ λ¬Έν•­μ„ λ°μ΄ν„° μ‹κ°ν™”μ™€ ν•¨κ» μ™„λ²½ λ¶„μ„ν•©λ‹λ‹¤.</p>
        </div>

        <!-- κ³„μΈµ μ΄λ™ λ¶„μ„ -->
        <div class="bg-white p-8 sm:p-10 rounded-2xl shadow-xl mb-12">
            <h3 class="text-3xl font-bold mb-4 text-center text-gray-800">π“ μ ν• 1: μ„Έλ€ κ°„ κ³„μΈµ μ΄λ™ λ¶„μ„</h3>
            <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">λ²„νΌμ„ ν΄λ¦­ν•μ—¬ νΉμ • μ ν•μ κ³„μΈµ μ΄λ™ λ°μ΄ν„°λ¥Ό μ‹κ°μ μΌλ΅ ν™•μΈν•κ³ , κ·Έ μλ―Έλ¥Ό λ¶„μ„ν•λ” ν›λ ¨μ„ ν•©λ‹λ‹¤.</p>
            <div class="grid lg:grid-cols-2 gap-8 items-center">
                <div class="h-80 md:h-96">
                    <canvas id="mobilityChart"></canvas>
                </div>
                <div>
                    <div class="flex flex-wrap gap-3 mb-6">
                        <button onclick="updateMobilityChart('all')" class="px-4 py-2 text-sm font-semibold rounded-full bg-slate-200 hover:bg-slate-300 transition">μ „μ²΄</button>
                        <button onclick="updateMobilityChart('inheritance')" class="px-4 py-2 text-sm font-semibold rounded-full bg-slate-200 hover:bg-slate-300 transition">κ³„μΈµ λ€λ¬Όλ¦Ό</button>
                        <button onclick="updateMobilityChart('upward')" class="px-4 py-2 text-sm font-semibold rounded-full bg-slate-200 hover:bg-slate-300 transition">μƒμΉ μ΄λ™</button>
                        <button onclick="updateMobilityChart('downward')" class="px-4 py-2 text-sm font-semibold rounded-full bg-slate-200 hover:bg-slate-300 transition">ν•κ°• μ΄λ™</button>
                    </div>
                    <div id="mobility-explanation" class="bg-slate-50 p-6 rounded-lg border border-slate-200 min-h-[120px]">
                        <!-- Explanation will be inserted here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- μΈκµ¬ κµ¬μ΅° λ¶„μ„ -->
        <div class="bg-white p-8 sm:p-10 rounded-2xl shadow-xl">
            <h3 class="text-3xl font-bold mb-4 text-center text-gray-800">π“ μ ν• 2: μΈκµ¬ κµ¬μ΅°μ™€ λ¶€μ–‘λΉ„ λ¶„μ„</h3>
            <p class="text-center text-gray-600 mb-10 max-w-2xl mx-auto">μ—°λ„λ³„ μΈκµ¬ κµ¬μ΅° λ³€ν™”λ¥Ό ν™•μΈν•κ³ , κ·Έμ— λ”°λ¥Έ λ…Έλ Ήν™” μ§€μμ™€ λ¶€μ–‘λΉ„μ λ³€ν™”λ¥Ό μ§μ ‘ κ³„μ‚°ν•λ©° μ¶”μ΄λ¥Ό λ¶„μ„ν•©λ‹λ‹¤.</p>
             <div class="grid lg:grid-cols-2 gap-8 items-center">
                <div class="h-80 md:h-96 flex justify-center">
                    <div class="relative w-full max-w-xs">
                        <canvas id="populationChart"></canvas>
                    </div>
                </div>
                <div>
                    <div class="flex flex-wrap gap-3 mb-6">
                        <button onclick="updatePopulationData(0)" class="px-4 py-2 font-semibold rounded-full transition">1990λ…„</button>
                        <button onclick="updatePopulationData(1)" class="px-4 py-2 font-semibold rounded-full transition">2020λ…„</button>
                        <button onclick="updatePopulationData(2)" class="px-4 py-2 font-semibold rounded-full transition">2050λ…„</button>
                    </div>
                    <div id="population-explanation" class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                        <h4 class="font-semibold text-lg mb-3"></h4>
                        <ul class="space-y-3 text-slate-700">
                            <li>
                                <strong>μ μ†λ…„ λ¶€μ–‘λΉ„:</strong> 
                                <div class="text-sm text-gray-600 pl-2">
                                    (<span id="youth-calc-numerator" class="font-medium"></span> Γ· <span id="youth-calc-denominator" class="font-medium"></span>) Γ— 100 = 
                                    <span id="youth-ratio" class="font-bold text-blue-600 text-base"></span>
                                </div>
                            </li>
                            <li>
                                <strong>λ…Έλ…„ λ¶€μ–‘λΉ„:</strong> 
                                <div class="text-sm text-gray-600 pl-2">
                                    (<span id="elderly-calc-numerator" class="font-medium"></span> Γ· <span id="elderly-calc-denominator" class="font-medium"></span>) Γ— 100 = 
                                    <span id="elderly-ratio" class="font-bold text-red-600 text-base"></span>
                                </div>
                            </li>
                            <li class="border-t pt-3 mt-3">
                                <strong>μ΄ λ¶€μ–‘λΉ„:</strong> 
                                 <div class="text-sm text-gray-600 pl-2">
                                    <span id="total-calc-youth-ratio" class="font-medium"></span> + <span id="total-calc-elderly-ratio" class="font-medium"></span> = 
                                    <span id="total-ratio" class="font-bold text-emerald-600 text-base"></span>
                                </div>
                            </li>
                        </ul>
                         <p class="text-xs text-slate-500 mt-4">*λ¶€μ–‘λΉ„ = (λ¶€μ–‘ μΈκµ¬ / μƒμ‚°κ°€λ¥μΈκµ¬) Γ— 100</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>

<!-- Footer Section -->
<footer class="bg-gray-900 text-white py-10 mt-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <p class="text-lg">&copy; 2025 ν—μ§€ν„ ν•™μƒ λ§μ¶¤ν• κ³µλµμ§‘</p>
        <p class="text-base text-gray-400 mt-2">λ§μ μ„ μ§„μ‹¬μΌλ΅ μ‘μ›ν•©λ‹λ‹¤!</p>
    </div>
</footer>

<script>
document.addEventListener('DOMContentLoaded', () => {
// μ΄ νμ΄μ§€μ— μ°¨νΈ μΊ”λ²„μ¤κ°€ μμ„ λ•λ§ μ¤ν¬λ¦½νΈλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
if (document.getElementById('mobilityChart') && document.getElementById('populationChart')) {

    // --- μ‚¬ν μ΄λ™ν‘ μ°¨νΈ λ΅μ§ ---
    const mobilityData = {
        labels: ['λ¶€λ¨: μƒ', 'λ¶€λ¨: μ¤‘', 'λ¶€λ¨: ν•'],
        datasets: [
            { label: 'μλ…€: μƒ', data: [15, 5, 2], backgroundColor: 'rgba(52, 211, 153, 0.7)' },
            { label: 'μλ…€: μ¤‘', data: [5, 30, 10], backgroundColor: 'rgba(59, 130, 246, 0.7)' },
            { label: 'μλ…€: ν•', data: [3, 8, 17], backgroundColor: 'rgba(239, 68, 68, 0.7)' }
        ]
    };
    const mobilityCtx = document.getElementById('mobilityChart').getContext('2d');
    const mobilityChart = new Chart(mobilityCtx, {
        type: 'bar',
        data: mobilityData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: { stacked: true },
                y: { stacked: true, beginAtZero: true, title: { display: true, text: 'μΈμ› (κ°€μƒ μμΉ)' } }
            },
            plugins: {
                title: { display: true, text: 'μ„Έλ€ κ°„ μ‚¬ν μ΄λ™ (λ¶€λ¨ β†’ μλ…€)', font: { size: 16 } },
                tooltip: { mode: 'index' }
            }
        }
    });

    window.updateMobilityChart = (type) => {
        const explanationEl = document.getElementById('mobility-explanation');
        let explanationHTML = '';
        const baseColors = ['rgba(52, 211, 153, 0.7)', 'rgba(59, 130, 246, 0.7)', 'rgba(239, 68, 68, 0.7)'];
        const highlightColor = 'rgba(251, 191, 36, 1)';
        const mutedColor = 'rgba(200, 200, 200, 0.5)';

        mobilityChart.data.datasets.forEach((dataset, i) => {
            dataset.backgroundColor = dataset.data.map((_, j) => {
                if (type === 'all') return baseColors[i];
                if (type === 'inheritance' && i === j) return highlightColor;
                if (type === 'upward' && i < j) return highlightColor;
                if (type === 'downward' && i > j) return highlightColor;
                return mutedColor;
            });
        });
        mobilityChart.update();
        
        switch(type) {
            case 'all':
                explanationHTML = `<h4 class="font-semibold text-lg mb-2">μ „μ²΄ λ³΄κΈ°</h4><p class="text-slate-700">λ¶€λ¨ μ„Έλ€μ κ³„μΈµμ΄ μλ…€ μ„Έλ€μ—μ„ μ–΄λ–»κ² λ¶„ν¬λλ”μ§€ μ „μ²΄μ μΌλ΅ λ³΄μ—¬μ¤λ‹λ‹¤. μ΄ 100λ…μ λ°μ΄ν„°λ¥Ό κΈ°λ°μΌλ΅ λ¶„μ„ν•©λ‹λ‹¤.</p>`;
                break;
            case 'inheritance':
                explanationHTML = `<h4 class="font-semibold text-lg mb-2">κ³„μΈµ λ€λ¬Όλ¦Ό (15+30+17 = 62λ…)</h4><p class="text-slate-700">λ¶€λ¨μ™€ μλ…€μ κ³„μΈµμ΄ λ™μΌν• κ²½μ°μ…λ‹λ‹¤. (μƒβ†’μƒ, μ¤‘β†’μ¤‘, ν•β†’ν•) μ „μ²΄μ 62%κ°€ κ³„μΈµμ„ λ€λ¬Όλ¦Όν–μµλ‹λ‹¤.</p>`;
                break;
            case 'upward':
                explanationHTML = `<h4 class="font-semibold text-lg mb-2">μƒμΉ μ΄λ™ (5+2+10 = 17λ…)</h4><p class="text-slate-700">μλ…€μ κ³„μΈµμ΄ λ¶€λ¨λ³΄λ‹¤ λ†’μ•„μ§„ κ²½μ°μ…λ‹λ‹¤. (μ¤‘β†’μƒ, ν•β†’μƒ, ν•β†’μ¤‘) μ„Έλ€ κ°„ μ΄λ™μ΄ λ°μƒν• 38λ… μ¤‘ μ•½ 45%κ°€ μƒμΉ μ΄λ™μ„ κ²½ν—ν–μµλ‹λ‹¤.</p>`;
                break;
            case 'downward':
                explanationHTML = `<h4 class="font-semibold text-lg mb-2">ν•κ°• μ΄λ™ (5+3+8 = 16λ…)</h4><p class="text-slate-700">μλ…€μ κ³„μΈµμ΄ λ¶€λ¨λ³΄λ‹¤ λ‚®μ•„μ§„ κ²½μ°μ…λ‹λ‹¤. (μƒβ†’μ¤‘, μƒβ†’ν•, μ¤‘β†’ν•) ν•κ°• μ΄λ™ λΉ„μ¨μ€ μ „μ²΄μ 16%μ…λ‹λ‹¤.</p>`;
                break;
        }
        explanationEl.innerHTML = explanationHTML;
    };
    updateMobilityChart('all');

    // --- μΈκµ¬ κµ¬μ΅° μ°¨νΈ λ΅μ§ ---
    const populationRawData = [
        { year: 1990, youth: 25, working: 60, elderly: 5 },
        { year: 2020, youth: 15, working: 65, elderly: 20 },
        { year: 2050, youth: 10, working: 50, elderly: 40 },
    ];
    
    const populationData = {
        labels: ['μ μ†λ…„ μΈκµ¬(0-14μ„Έ)', 'μƒμ‚°κ°€λ¥μΈκµ¬(15-64μ„Έ)', 'λ…Έλ…„ μΈκµ¬(65μ„Έ μ΄μƒ)'],
        datasets: [{
            label: 'μΈκµ¬ λΉ„μ¨ (%)',
            data: [25, 60, 5],
            backgroundColor: ['rgba(59, 130, 246, 0.7)', 'rgba(22, 163, 74, 0.7)', 'rgba(239, 68, 68, 0.7)']
        }]
    };

    const populationCtx = document.getElementById('populationChart').getContext('2d');
    const populationChart = new Chart(populationCtx, {
        type: 'doughnut',
        data: populationData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                title: { display: true, text: '1990λ…„ μΈκµ¬ κµ¬μ΅°', font: { size: 16 } },
                legend: { position: 'top' }
            }
        }
    });
    
    const populationButtons = document.querySelectorAll('#killer-questions button[onclick^="updatePopulationData"]');
    window.updatePopulationData = (index) => {
        const data = populationRawData[index];
        populationChart.data.datasets[0].data = [data.youth, data.working, data.elderly];
        populationChart.options.plugins.title.text = `${data.year}λ…„ μΈκµ¬ κµ¬μ΅°` + (data.year === 2050 ? ' (μ „λ§)' : '');
        populationChart.update();
        
        const youthRatio = ((data.youth / data.working) * 100).toFixed(1);
        const elderlyRatio = ((data.elderly / data.working) * 100).toFixed(1);
        const totalRatio = (parseFloat(youthRatio) + parseFloat(elderlyRatio)).toFixed(1);

        document.getElementById('population-explanation').querySelector('h4').textContent = `${data.year}λ…„ μΈκµ¬ κµ¬μ΅° λ¶„μ„` + (data.year === 2050 ? ' (μ „λ§)' : '');
        
        // Update calculation display
        document.getElementById('youth-calc-numerator').textContent = data.youth;
        document.getElementById('youth-calc-denominator').textContent = data.working;
        document.getElementById('youth-ratio').textContent = youthRatio;

        document.getElementById('elderly-calc-numerator').textContent = data.elderly;
        document.getElementById('elderly-calc-denominator').textContent = data.working;
        document.getElementById('elderly-ratio').textContent = elderlyRatio;

        document.getElementById('total-calc-youth-ratio').textContent = youthRatio;
        document.getElementById('total-calc-elderly-ratio').textContent = elderlyRatio;
        document.getElementById('total-ratio').textContent = totalRatio;

        populationButtons.forEach((btn, i) => {
            btn.classList.toggle('bg-emerald-500', i === index);
            btn.classList.toggle('text-white', i === index);
            btn.classList.toggle('bg-slate-200', i !== index);
            btn.classList.toggle('text-slate-800', i !== index);
            btn.classList.toggle('hover:bg-emerald-600', !btn.classList.contains('bg-emerald-500'));
            btn.classList.toggle('hover:bg-slate-300', btn.classList.contains('bg-slate-200'));
        });
    };
    updatePopulationData(0);
}
});
</script>

</body>
</html>

